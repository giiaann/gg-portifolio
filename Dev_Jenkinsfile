pipeline {
    agent {
        // Specify the agent by its name
        label 'Dev Node'
    }
    
   stages {
        stage('Initialization') {
            steps {
                script {
                    dir('/home/ubuntu/gg-project') {
                        // Ensure the repository is initialized and has a remote set
                        if (!fileExists('.git')) {
                            sh 'git init'
                            sh 'git remote add origin https://github.com/giiaann/gg-portifolio.git'
                        }
                        
                        // Fetch the latest changes from the remote repository
                        sh 'git status'
			sh 'git fetch origin'
                        
                        // Checkout to the 'develop' branch safely
                        sh 'git checkout develop'
                        sh 'git status'

                        // Pull the latest changes into the 'develop' branch
                        sh 'git pull origin develop'
			sh 'git status'
			sh 'git branch'
			sh pwd
                    }
                }
            }
        }

        stage('Build') {
            steps {
                echo 'Building..'
                // Add build steps here, ensuring they're appropriate for your project
            }
        }
        stage('Test') {
            steps {
                echo 'Testing..'
                // Add test steps here, considering the framework and the language used in your project
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying..'
                // Deployment steps go here, adjust based on your deployment target and strategy
            }
        }
    }
}
