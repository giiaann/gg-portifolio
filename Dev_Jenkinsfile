pipeline {
    agent {
        // Specify the agent by its name
        label 'Dev Node'
    }
    
    stages {
        stage('Initialization') {
            steps {
                script {
                    dir('/home/ubuntu/gg-project') {
                        // Check if Git repository is initialized, and set remote origin
                        if (!fileExists('.git')) {
                            sh 'git init'
                            sh 'git remote add origin git@github.com:giiaann/gg-portifolio.git'
                            echo 'Git repository initialized and remote set.'
                        }
                        
                        // Fetch the 'develop' branch and ensure it's checked out
                        sh 'git fetch origin develop:develop'
                        sh 'git checkout develop || git checkout -b develop'
                        sh 'git pull origin develop'
                        echo 'On develop branch, repository up to date.'
                    }
                }
            }
        }
        stage('Build') {
            steps {
                echo 'Building..'
                // Add build steps here, ensuring they're appropriate for your project
            }
        }
        stage('Test') {
            steps {
                echo 'Testing..'
                // Add test steps here, considering the framework and the language used in your project
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying..'
                // Deployment steps go here, adjust based on your deployment target and strategy
            }
        }
    }
}
